<!DOCTYPE html>  <html lang="ar">  
<head>  
<meta charset="UTF-8">  
<title>ğŸ Ù‡Ø¯ÙŠØ© ÙŠÙˆÙ…ÙŠØ©</title>  <style>  
body{  
  margin:0;  
  background:#000;  
  color:#fff;  
  font-family:Arial;  
  text-align:center;  
}  
.header-img{  
  width:100%;  
  max-height:260px;  
  object-fit:cover;  
}  
.box{  
  margin:20px auto;  
  padding:30px;  
  width:85%;  
  max-width:360px;  
  background:#111;  
  border-radius:25px;  
  border:2px solid gold;  
  box-shadow:0 0 25px rgba(255,215,0,.4);  
}  
.title{  
  font-size:24px;  
  color:gold;  
  margin-bottom:10px;  
}  
.status{  
  color:#0f0;  
  margin-bottom:15px;  
}  
.amount{  
  font-size:42px;  
  color:gold;  
  margin:20px 0;  
}  
button{  
  background:gold;  
  color:#000;  
  border:none;  
  padding:15px 35px;  
  font-size:18px;  
  border-radius:30px;  
}  
button:disabled{  
  background:#555;  
  color:#aaa;  
}  
</style>  </head>  <body>  <img class="header-img" src="https://i.postimg.cc/qBGsVHG1/1-5-10.jpg">  <div class="box">  
  <div class="title">ğŸ Ù‡Ø¯ÙŠØ© ÙŠÙˆÙ…ÙŠØ©</div>  
  <div id="status" class="status">ØªØ­Ù…ÙŠÙ„...</div>  
  <div id="amount" class="amount">â€” Ø¯Ø¬</div>  
  <button id="btn" disabled>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù‡Ø¯ÙŠØ©</button>  
</div>  <script type="module">  
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";  
import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";  
import { getFirestore, doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";  
  
const firebaseConfig = {  
  apiKey: "AIzaSyAa6ETi1DmEI-3nVuqjpsaodT0rXsP8bIw",  
  authDomain: "aple-21978.firebaseapp.com",  
  projectId: "aple-21978",  
  storageBucket: "aple-21978.appspot.com",  
  messagingSenderId: "1013598113300",  
  appId: "1:1013598113300:web:5e71138b4e75e2a2752101"  
};  
  
const app = initializeApp(firebaseConfig);  
const auth = getAuth(app);  
const db = getFirestore(app);  
  
const gifts = [10,15,20,25,35,40,50,60,70,90,100];  
const DAY = 86400000;  
  
const statusDiv = document.getElementById("status");  
const amountDiv = document.getElementById("amount");  
const btn = document.getElementById("btn");  
  
signInAnonymously(auth);  
  
onAuthStateChanged(auth, async (user)=>{  
  if(!user) return;  
  
  const ref = doc(db,"users",user.uid);  
  const snap = await getDoc(ref);  
  
  if(!snap.exists()){  
    await setDoc(ref,{  
      balance: 0,  
      lastGift: 0  
    });  
  }  
  
  load(ref);  
});  
  
async function load(ref){  
  const snap = await getDoc(ref);  
  const data = snap.data();  
  
  const balance = Number(data.balance) || 0;  
  const lastGift = Number(data.lastGift) || 0;  
  
  amountDiv.innerHTML = balance + " Ø¯Ø¬";  
  
  const diff = Date.now() - lastGift;  
  
  if(lastGift === 0 || diff >= DAY){  
    statusDiv.innerHTML = "ğŸ Ø¬Ø§Ù‡Ø²Ø©";  
    btn.disabled = false;  
  }else{  
    btn.disabled = true;  
    startCountdown(DAY - diff);  
  }  
}  
  
function startCountdown(ms){  
  updateTime(ms);  
  const timer = setInterval(()=>{  
    ms -= 1000;  
    if(ms <= 0){  
      clearInterval(timer);  
      statusDiv.innerHTML = "ğŸ Ø¬Ø§Ù‡Ø²Ø©";  
      btn.disabled = false;  
      return;  
    }  
    updateTime(ms);  
  },1000);  
}  
  
function updateTime(ms){  
  const h = Math.floor(ms / 3600000);  
  const m = Math.floor((ms % 3600000) / 60000);  
  const s = Math.floor((ms % 60000) / 1000);  
  statusDiv.innerHTML = `â³ ${h}Ø³ ${m}Ø¯ ${s}Ø«`;  
}  
  
btn.onclick = async ()=>{  
  const user = auth.currentUser;  
  if(!user) return;  
  
  const ref = doc(db,"users",user.uid);  
  const snap = await getDoc(ref);  
  const data = snap.data();  
  
  if(Date.now() - Number(data.lastGift) < DAY){  
    return;  
  }  
  
  const gift = gifts[Math.floor(Math.random()*gifts.length)];  
  
  await updateDoc(ref,{  
    balance: Number(data.balance) + gift,  
    lastGift: Date.now()  
  });  
  
  load(ref);  
};  
</script>  </body>  
</html>  